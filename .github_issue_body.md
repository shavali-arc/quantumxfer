## üéØ Feature Overview

Add **REST API Client capability** to QuantumXfer, allowing users to make REST API calls directly from the terminal interface without switching applications.

### üí° Problem Statement

Currently, when a DevOps engineer needs to:
1. SSH into a server via QuantumXfer
2. Test an API endpoint on that server
3. They must switch to a separate tool (Postman, Terminal, etc.)
4. Then switch back to QuantumXfer

**Result**: Multiple context switches, lost focus, increased friction.

### ‚ú® Proposed Solution

Integrate REST API client directly into the terminal tab, allowing seamless API testing:

```bash
# SSH into server
$ ssh user@appserver.com

# Test API directly in same terminal
$ GET http://localhost:8080/api/health
HTTP/1.1 200 OK
Content-Type: application/json

{ "status": "running", "uptime": 3600 }

Duration: 42ms
```

---

## üìã Requirements

### Phase 1: Core REST Client (v2.0 MVP)

#### 1. REST Client Module
- Support HTTP/HTTPS protocols
- Handle GET, POST, PUT, DELETE, PATCH, HEAD, OPTIONS methods
- Custom request headers
- JSON body support
- Request timeout (configurable, 30s default)
- Response parsing (auto-detect JSON)
- Error handling and reporting
- Duration tracking

#### 2. Terminal Integration
- Command syntax parsing (GET/POST URL [options])
- Header argument parsing (-H "key: value")
- Body argument parsing (-d '{json}')
- Timeout argument parsing (-t seconds)
- Pretty-printed response display
- Color-coded HTTP status codes
- Formatted JSON output

#### 3. Security & Reliability
- URL validation (http/https only)
- Request timeout protection
- Error isolation (API errors don't crash app)
- Header sanitization
- SSL/TLS support

---

## üìä Use Cases

### 1. DevOps Automation
```bash
# SSH into server and check health
$ GET http://localhost:8080/health

# Trigger deployment
$ POST http://localhost:8080/deploy -d '{"version":"1.2.0"}'

# Check status
$ GET http://localhost:8080/status
```

### 2. Microservices Management
```bash
# Check service1
$ GET http://service1:3000/api/health

# Check service2
$ GET http://service2:3000/api/health

# Coordinate deployment
$ POST http://orchestrator:4000/deploy-all
```

### 3. CI/CD Integration
```bash
# SSH into Jenkins
$ ssh admin@jenkins.internal

# Trigger build
$ POST http://localhost:8080/api/job/build

# Get build status
$ GET http://localhost:8080/api/job/status
```

### 4. API Testing
```bash
# With custom headers
$ GET http://secure-api:8443/protected \
  -H "Authorization: Bearer token123"

# With timeout
$ GET http://slow-api:8080/data -t 60

# With body
$ PUT http://api:3000/resource/123 \
  -d '{"name":"updated"}' \
  -H "Authorization: Bearer xyz"
```

---

## üèóÔ∏è Technical Design

### Architecture

```
Terminal Input ‚Üí Command Parser ‚Üí REST Client ‚Üí HTTP/HTTPS ‚Üí API Response ‚Üí Display
  "GET url"         ‚Üì                 ‚Üì            ‚Üì           ‚Üì            ‚Üì
  detects REST    parses URL,      Node.js      send         get          format
  command         extracts         http/https   request      response      nicely
                  headers & body   module
```

### Components to Implement

#### 1. New File: `electron/rest-client.js` (~150 lines)
- RESTAPIClient class
- executeRequest() method
- Response parsing
- Error handling
- Timeout management

#### 2. Updated: `electron/main.js` (+10 lines)
- IPC handler: `rest-api-request`
- Integrate with existing handlers

#### 3. Updated: `src/types/electron.d.ts` (+20 lines)
- RESTAPIResponse interface
- restAPIRequest method

#### 4. Updated: `src/App_new.tsx` (~150 lines)
- isRESTCommand() detection
- parseRESTCommand() parser
- executeRESTCommand() handler
- formatRESTResponse() formatter

### Command Syntax

```
METHOD URL [OPTIONS]

Where:
  METHOD    = GET|POST|PUT|DELETE|PATCH|HEAD|OPTIONS
  URL       = http://host:port/path?query
  OPTIONS:
    -H "Header: value"   # Custom header (repeatable)
    -d '{json}'          # Request body
    -t seconds           # Timeout in seconds
```

### Example Commands

```bash
# Simple GET
GET http://localhost:8080/api/status

# POST with JSON body
POST http://api.internal:3000/deploy -d '{"version":"1.2.0"}'

# GET with authentication
GET http://secure-api:8443/protected -H "Authorization: Bearer token123"

# Multiple headers
POST http://api:3000/data \
  -H "Authorization: Bearer xyz" \
  -H "X-Custom: value" \
  -d '{"key":"value"}' \
  -t 60
```

---

## üé® Response Formatting

```
$ GET http://localhost:8080/api/users

=== HTTP Response ===
Status: 200 OK
Content-Type: application/json
Content-Length: 256
Date: Fri, 29 Nov 2025 14:30:45 GMT

{
  "users": [
    {
      "id": 1,
      "name": "John Doe",
      "email": "john@example.com"
    }
  ],
  "total": 1
}

Duration: 42ms
===
```

---

## üîê Security Considerations

- HTTPS support with automatic protocol detection
- Custom headers for authentication tokens
- Request timeout protection (prevents hanging)
- URL validation (only http/https allowed)
- Error isolation (API failures don't crash app)
- Header sanitization (prevent injection attacks)
- ‚ö†Ô∏è Never log Authorization headers
- ‚ö†Ô∏è Be careful with sensitive data in request bodies

---

## üìä Implementation Phases

### Phase 1: Core REST Client (v2.0)
**Timeline**: 1-2 weeks
**Effort**: 80-100 hours

**Deliverables**:
- REST client module (Node.js http/https)
- Terminal command parser
- Response formatter
- Error handling
- Unit tests
- Documentation

### Phase 2: Advanced Features (v2.1)
**Timeline**: 2-3 weeks
**Effort**: 120-150 hours

**Deliverables**:
- Request history & bookmarks
- Save request templates
- Response validation/assertions
- Batch requests
- Environment variables
- Request chaining

### Phase 3: Enterprise Features (v2.2+)
**Timeline**: 3-4 weeks
**Effort**: 200+ hours

**Deliverables**:
- OAuth2 support
- Certificate management
- GraphQL support
- WebSocket support
- API testing framework
- OpenAPI/Swagger integration

---

## üíª Implementation Checklist

### Core Implementation
- [ ] Create `electron/rest-client.js` with RESTAPIClient class
- [ ] Add `rest-api-request` IPC handler in main.js
- [ ] Add TypeScript types in src/types/electron.d.ts
- [ ] Implement REST command detection in App_new.tsx
- [ ] Implement REST command parser
- [ ] Implement REST command executor
- [ ] Implement response formatter
- [ ] Add color-coded status display

### Testing
- [ ] Unit tests for REST client
- [ ] Integration tests with mock HTTP server
- [ ] Test various HTTP methods
- [ ] Test error scenarios
- [ ] Test timeout handling
- [ ] Test different content types
- [ ] Test header parsing
- [ ] Test body JSON parsing

### Documentation
- [ ] Update README with REST client feature
- [ ] Create REST client usage guide
- [ ] Document command syntax
- [ ] Provide examples
- [ ] Document security best practices
- [ ] Add troubleshooting guide

### UI/UX
- [ ] Pretty-print JSON responses
- [ ] Color-coded HTTP status codes
- [ ] Clear error messages
- [ ] Response header display
- [ ] Duration tracking

---

## üìà Expected Impact

### Market Position
- **Unique Feature**: No other SSH client has built-in REST API support
- **Competitive Advantage**: Combines terminal access + API testing
- **Target Users**: DevOps, SRE, Backend Developers, Infrastructure Managers
- **Market Size**: Millions of professionals who use both SSH and APIs

### User Experience
- Eliminates context switching
- Faster workflow
- Better integration testing
- Reduced tool fragmentation
- Improved productivity

### Business Value
- Differentiates from competitors
- Attracts enterprise customers
- Increases product stickiness
- Enables new use cases
- Foundation for enterprise features

---

## üîó References

- Full Analysis: [REST-API-CLIENT-ANALYSIS.md](https://github.com/shavali-arc/quantumxfer/blob/main/REST-API-CLIENT-ANALYSIS.md)
- Enterprise Assessment: [ENTERPRISE_ASSESSMENT_ISSUES.md](https://github.com/shavali-arc/quantumxfer/blob/main/ENTERPRISE_ASSESSMENT_ISSUES.md)
- Related Issues: #52 (Tests), #53 (Logging), #54 (SSH Keys)

---

## üéØ Success Criteria

- REST API client module functional and tested
- Terminal integration complete and seamless
- Support for all major HTTP methods
- Custom headers working properly
- JSON body support validated
- Timeout protection implemented
- Error handling robust
- Response formatting clean and readable
- Security guidelines documented
- Comprehensive documentation provided

---

## üìû Questions?

See [REST-API-CLIENT-ANALYSIS.md](https://github.com/shavali-arc/quantumxfer/blob/main/REST-API-CLIENT-ANALYSIS.md) for complete technical analysis, code examples, and implementation details.

**Let's make QuantumXfer the ultimate SSH + API management tool!** üöÄ
